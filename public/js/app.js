(()=>{function e(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,c=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw c}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var n=$(".quotes-carousel");n&&n.owlCarousel({loop:!0,margin:20,nav:!1,items:1,dots:!1,singleItem:!0,autoHeight:!0,transitionStyle:"fade"});var r=document.getElementById("owl_prev_nav"),o=document.getElementById("owl_next_nav");function a(){document.querySelectorAll("button[data-action='expand_quote'").forEach((function(e){var t=document.querySelectorAll("[data-identificator='"+e.dataset.quote+"']");t[0].clientHeight==t[0].scrollHeight&&(e.style.display="none"),e.addEventListener("click",(function(r){for(i=0;i<t.length;i++){document.querySelectorAll("[data-identificator='"+e.dataset.quote+"']")[i].classList.add("card__text--expanded")}r.target.classList.add("more__button--hidden"),n.trigger("refresh.owl.carousel")}))}))}r&&r.addEventListener("click",(function(){n.trigger("prev.owl.carousel")})),o&&o.addEventListener("click",(function(){n.trigger("next.owl.carousel")})),a();var c=document.getElementById("refresher"),l=document.getElementById("refresher_icon");l&&(l.onclick=function e(){$.ajax({type:"POST",enctype:"multipart/form-data",url:"/refresher/update",processData:!1,contentType:!1,cache:!1,timeout:6e4,success:function(t){c.innerHTML=t;var n=document.getElementById("refresher_icon");n&&(n.onclick=e)},error:function(){console.log("Refresher update error!")}})});var u=document.getElementById("filters_toggler");u&&(u.onclick=function(){u.classList.toggle("filters-toggler--active");var e=document.getElementById("category_filter");e.clientHeight?e.style.height=0:e.style.height=e.scrollHeight+"px"});var s=document.getElementById("rules_nullifier");s&&(s.onclick=function(){!function(e){document.getElementById("rules_keyword").value="";$("input[name='category_ids[]']:checked").map((function(){$(this).removeAttr("checked")}));var t=document.querySelectorAll(".category-filters__button--active");for(i=0;i<t.length;i++)t[i].classList.remove("category-filters__button--active");"quotes"==e?g():"authors"==e&&h()}(s.dataset.source)});var d=document.getElementById("rules_keyword");if(d){var f=d.dataset.source;"quotes"==f?$("#rules_keyword").on("input",(function(){g()})):"authors"==f&&$("#rules_keyword").on("input",(function(){h()}))}var m=document.getElementById("quotes_list");function g(){var t=$("#rules_form")[0],n=new FormData(t),r=$("input[name='category_ids[]']:checked").map((function(){return $(this).val()})).get(),o=JSON.stringify(r);n.append("category_ids",o),$.ajax({type:"POST",enctype:"multipart/form-data",url:"/quotes/filter",data:n,processData:!1,contentType:!1,cache:!1,timeout:6e4,success:function(t){m.innerHTML=t,a(),function(){var t,n=e(document.getElementsByClassName("ya-share2"));try{for(n.s();!(t=n.n()).done;)share_button=t.value,Ya.share2(share_button,{})}catch(e){n.e(e)}finally{n.f()}}()},error:function(){console.log("Quotes filter error!")}})}m&&document.querySelectorAll(".category-filters__button").forEach((function(e){e.addEventListener("click",(function(e){var t=e.target;t.classList.toggle("category-filters__button--active"),document.getElementById("cat"+t.dataset.inputId).toggleAttribute("checked"),g()}))}));var y=document.getElementById("authors_list");function h(){var e=$("#rules_form")[0],t=new FormData(e),n=$("input[name='category_ids[]']:checked").map((function(){return $(this).val()})).get(),r=JSON.stringify(n);t.append("category_ids",r),$.ajax({type:"POST",enctype:"multipart/form-data",url:"/authors/filter",data:t,processData:!1,contentType:!1,cache:!1,timeout:6e4,success:function(e){y.innerHTML=e},error:function(){console.log("Authors filter error!")}})}y&&document.querySelectorAll(".category-filters__button").forEach((function(e){e.addEventListener("click",(function(e){var t=e.target;t.classList.toggle("category-filters__button--active"),document.getElementById("cat"+t.dataset.inputId).toggleAttribute("checked"),h()}))}));var v=document.getElementById("mobile_menu"),p=document.getElementById("mobile_categories");document.querySelectorAll("[data-action='toggle_mobile_menu']").forEach((function(e){e.addEventListener("click",(function(e){v.classList.toggle("mobile-menu--visible"),p.classList.remove("mobile-categories--visible")}))})),document.querySelectorAll("[data-action='toggle_mobile_categories']").forEach((function(e){e.addEventListener("click",(function(e){p.classList.toggle("mobile-categories--visible")}))}))})();