(()=>{function e(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw i}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var r=$(".quotes-carousel");r&&r.owlCarousel({loop:!0,margin:20,nav:!1,items:1,dots:!1,singleItem:!0,autoHeight:!0,transitionStyle:"fade"});var n=document.getElementById("owl_prev_nav"),o=document.getElementById("owl_next_nav");function a(){document.querySelectorAll("button[data-action='expand_quote'").forEach((function(e){var t=document.querySelectorAll("[data-identificator='"+e.dataset.quote+"']");t[0].clientHeight==t[0].scrollHeight&&(e.style.display="none"),e.addEventListener("click",(function(n){for(i=0;i<t.length;i++){document.querySelectorAll("[data-identificator='"+e.dataset.quote+"']")[i].classList.add("card__text--expanded")}n.target.classList.add("more__button--hidden"),r.trigger("refresh.owl.carousel")}))}))}n&&n.addEventListener("click",(function(){r.trigger("prev.owl.carousel")})),o&&o.addEventListener("click",(function(){r.trigger("next.owl.carousel")})),a();var l=document.getElementById("refresher"),c=document.getElementById("refresher_icon");c&&(c.onclick=function e(){$.ajax({type:"POST",enctype:"multipart/form-data",url:"/refresher/update",processData:!1,contentType:!1,cache:!1,timeout:6e4,success:function(t){l.innerHTML=t;var r=document.getElementById("refresher_icon");r&&(r.onclick=e)},error:function(){console.log("Refresher update error!")}})});var u=document.getElementById("filters_toggler");u&&(u.onclick=function(){u.classList.toggle("filters-toggler--active");var e=document.getElementById("category_filter");e.clientHeight?e.style.height=0:e.style.height=e.scrollHeight+"px"});var s=document.getElementById("rules_keyword");if(s){var d=s.dataset.source;"quotes"==d?$("#rules_keyword").on("input",(function(){$.ajax({type:"POST",enctype:"multipart/form-data",url:"/quotes/filter",data:{category_id:m.value,keyword:s.value},cache:!1,timeout:6e4,success:function(t){f.innerHTML=t,a(),function(){var t,r=e(document.getElementsByClassName("ya-share2"));try{for(r.s();!(t=r.n()).done;)share_button=t.value,Ya.share2(share_button,{})}catch(e){r.e(e)}finally{r.f()}}()},error:function(){console.log("Quotes filter error!")}})})):"authors"==d&&$("#rules_keyword").on("input",(function(){$.ajax({type:"POST",enctype:"multipart/form-data",url:"/authors/filter",data:{keyword:s.value},cache:!1,timeout:6e4,success:function(e){g.innerHTML=e},error:function(){console.log("Authors filter error!")}})}))}var f=document.getElementById("quotes_list"),m=document.getElementById("rules_category_id");var g=document.getElementById("authors_list");var y=document.getElementById("mobile_menu"),h=document.getElementById("mobile_categories");document.querySelectorAll("[data-action='toggle_mobile_menu']").forEach((function(e){e.addEventListener("click",(function(e){y.classList.toggle("mobile-menu--visible"),h.classList.remove("mobile-categories--visible")}))})),document.querySelectorAll("[data-action='toggle_mobile_categories']").forEach((function(e){e.addEventListener("click",(function(e){h.classList.toggle("mobile-categories--visible")}))}))})();